{% include "_header.html" %} {% include "_analytics.html" %} {% import "bootstrap/wtf.html" as wtf %}

<div class="section section-components section-shaped pb-10 " style="color: #f4f5f7;">
    <div class="shape shape-style-1 shape-primary">
        <span class="span-150"></span>
        <span class="span-50"></span>
        <span class="span-50"></span>
        <span class="span-75"></span>
        <span class="span-100"></span>
        <span class="span-75"></span>
        <span class="span-50"></span>
        <span class="span-100"></span>
        <span class="span-50"></span>
        <span class="span-100"></span>
    </div>
    <div class="container" style="height: 110px;">
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <h2 style="color: #f4f5f7;">Lifter Profile</h2>
            </div>
        </div>
    </div>
    {% include "_greyskew.html" %}
</div>
<div class="wrapper">
    <section class="section-profile-cover bg-secondary"></section>
    <section class="section bg-secondary">
        <div class="container">
            <div class="card card-profile shadow mt--300">
                <div class="px-4">
                    <div class="row justify-content-center">
                        <div class="col-lg-3 order-lg-2">
                            <div class="card-profile-image">
                                <a href="javascript:;">
                                    <img src="{{url_for('static', filename='img/wodbrain-apple-icon.png')}}" class="rounded-circle">
                                </a>
                            </div>
                        </div>
                        <div class="col-lg-4 order-lg-3 text-lg-right align-self-lg-center">
                            <div class="card-profile-actions py-4 mt-lg-0">
                                <a href="/edit_profile" class="btn btn-sm btn-outline-primary mr-4"><i class="fas fa-user-edit"></i> Edit Profile</a>
                                <a href="/loglift/new/new" class="btn btn-sm btn-outline-primary float-right"><i class="far fa-plus-square"></i> Log Lift</a>
                            </div>
                        </div>
                        <div class="col-lg-4 order-lg-1">
                            <div class="card-profile-stats d-flex justify-content-center">
                                <div>
                                    <span class="heading">{{ current_user.age }}</span>
                                    <span class="description">years</span>
                                </div>
                                <div>
                                    <span class="heading">{{ current_user.sex }}</span>
                                    <span class="description">sex</span>
                                </div>
                                <div>
                                    <span class="heading">{{ current_user.bw }}</span>
                                    <span class="description">lbs</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 text-center">
                        <h3> {{ current_user.name }} </h3>
                    </div>
                    <div class="py-5 border-top text-center">
                        <div class="row justify-content-center">
                            <div class="col-lg-9">
                                <table class="profile-table mb-5" style="margin: auto;">
                                    <tr>
                                        <th colspan="4" style="text-align: center;">
                                            <h4>Personal Records</h4>
                                        </th>
                                        {% for name in liftcatalog: %}
                                        <tr>
                                            <td>
                                                {{name}}
                                            </td>
                                            {% if pr_journal[name]['onerm'] == 0 %}
                                            <td>
                                                <span class="small">No Lift Logged</span>
                                            </td>
                                            <td>
                                                <span class="small"> -- </span>
                                            </td>
                                            <td>
                                                <a href="/loglift/{{liftnumbers[name]}}/new"><i class="far fa-plus-square"></i></a>
                                            </td>
                                            {% else %}
                                            <td>
                                                {{ pr_journal[name]['onerm'] }}# {% if pr_journal[name]['actual'] == False %}
                                                <br><span class="small">({{ pr_journal[name]['rep'] }} x {{ pr_journal[name]['load'] }})</span> {% endif %}
                                            </td>
                                            <td>
                                                <span class="small">{{ pr_journal[name]['date'] }}</span>
                                            </td>
                                            <td>
                                                <a href="/wodweight/{{ liftnumbers[name] }}/{{ pr_journal[name]['onerm'] }}"><i class="fas fa-calculator"></i> </a>
                                            </td>
                                            {% endif %}
                                        </tr>
                                        {% endfor %}
                                    </tr>
                                </table>
                                <p>
                                    <a href="/logout" id="Front Squat" class="btn btn-light mt-4"><i class="fas fa-sign-out-alt"></i> Logout</a>
                                </p>
                                <!-- ACCORDIAN WITH ALL USER LIFTS -->
                                <div class="accordion-1">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-12 ml-auto">
                                                <div class="accordion" id="alllifts">
                                                    {% for name in liftcatalog: %}
                                                    <div class="card">
                                                        <div class="card-header" id="heading{{liftnumbers[name]}}">
                                                            <h5 class="mb-0">
                                                                <button class="btn btn-link w-100 text-primary text-left" type="button" data-toggle="collapse" data-target="#data{{liftnumbers[name]}}" aria-expanded="false" aria-controls="data{{liftnumbers[name]}}">
                                                                    {{ name }} <i class="fas fa-chevron-down float-right"></i>
                                                                </button>
                                                            </h5>
                                                        </div>
                                                        <div id="data{{liftnumbers[name]}}" class="collapse" aria-labelledby="heading{{liftnumbers[name]}}" data-parent="#alllifts">
                                                            <div class="card-body opacity-8">


                                                                <table class="profile-table mb-5" style="margin: auto;">
                                                                    {% for entry in liftdata[name]: %}
                                                                    <tr>
                                                                        <td>
                                                                            <span class="small">{{ liftdata[name][entry]['date'] }}</span>
                                                                        </td>
                                                                        <td>
                                                                            {{ liftdata[name][entry]['onerm'] }}# {% if liftdata[name][entry]['actual'] != True: %}
                                                                            <br> <span class="small">({{ liftdata[name][entry]['rep'] }} x {{ liftdata[name][entry]['load'] }}}</span> {% endif %}
                                                                        </td>
                                                                        <td>
                                                                            &nbsp;&nbsp;&nbsp; <i class="far fa-edit"></i> &nbsp;&nbsp;&nbsp; <i class="far fa-trash-alt"></i>&nbsp;&nbsp;&nbsp;
                                                                        </td>
                                                                    </tr>
                                                                    {% endfor %}
                                                                </table>

                                                                <!-- TODO: ADD DESCRIPTIVE TEXT AND [+] ICON HERE IF THERE ARE NO LIFTS LOGGED -->
                                                                <!-- TODO: ADD PAGE AND ROUTE FOR EDITING LIFT AND ROUTE TO DELETE LIFT -->

                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {% include "_footer.html" %}