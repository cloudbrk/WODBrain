{% include "_header.html" %} {% include "_analytics.html" %} {% import "bootstrap/wtf.html" as wtf %}

<div class="section section-components section-shaped pb-10 " style="color: #f4f5f7;">
    <div class="shape shape-style-1 shape-primary">
        <span class="span-150"></span>
        <span class="span-50"></span>
        <span class="span-50"></span>
        <span class="span-75"></span>
        <span class="span-100"></span>
        <span class="span-75"></span>
        <span class="span-50"></span>
        <span class="span-100"></span>
        <span class="span-50"></span>
        <span class="span-100"></span>
    </div>
    <div class="container" style="height: 110px;">
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <h2 style="color: #f4f5f7;">Lifter Profile</h2>
            </div>
        </div>
    </div>
    {% include "_greyskew.html" %}
</div>
<div class="wrapper">
    <section class="section-profile-cover bg-secondary"></section>
    <section class="section bg-secondary">
        <div class="container">
            <div class="card card-profile shadow mt--250">
                <div class="px-4">
                    <div class="row justify-content-center">
                        <div class="col-lg-3 order-lg-2">
                            <div class="card-profile-image">
                                <img src="{{url_for('static', filename='img/wodbrain-apple-icon.png')}}" class="rounded-circle">
                            </div>
                        </div>
                        <div class="col-lg-4 order-lg-3 text-lg-right align-self-lg-center">
                            <div class="card-profile-actions py-4 mt-lg-0">
                                <a href="/edit_profile" class="btn btn-sm btn-outline-primary mr-4"><i class="fas fa-user-edit"></i> Edit Profile</a>
                                <a href="/loglift/new/new/new" class="btn btn-sm btn-outline-primary float-right"><i class="far fa-plus-square"></i> Log Lift</a>
                            </div>
                        </div>
                        <div class="col-lg-4 order-lg-1">
                            <div class="card-profile-stats d-flex justify-content-center">
                                <div>
                                    <span class="heading">{{ current_user.age }}</span>
                                    <span class="description">years</span>
                                </div>
                                <div>
                                    <span class="heading">{{ current_user.sex }}</span>
                                    <span class="description">sex</span>
                                </div>
                                <div>
                                    <span class="heading">{{ current_user.bw }}</span>
                                    <span class="description">lbs</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 text-center">
                        <h2> {{ current_user.name }} </h2>
                    </div>
                    <div class="py-4 border-top text-center">
                        <div class="row justify-content-center">
                            <div class="col-lg-9">
                                <!-- TABLE TO DISPLAY USER PR's -->
                                <table class="profile-table mb-5" style="margin: auto;">
                                    <tr>
                                        <th colspan="4" style="text-align: center;">
                                            <h4>Personal Records</h4>
                                        </th>
                                    </tr>
                                    {% for name in liftcatalog: %}
                                    <tr>
                                        <td>
                                            {{name}}
                                        </td>
                                        {% if pr_journal[name]['onerm'] == 0 %}
                                        <td>
                                            <span class="small">No Lift Logged</span>
                                        </td>
                                        <td>
                                            <span class="small"> -- </span>
                                        </td>
                                        <td>
                                            <a href="/loglift/{{liftnumbers[name]}}/new/new"><i class="far fa-plus-square"></i></a>
                                        </td>
                                        {% else %}
                                        <td>
                                            {{ pr_journal[name]['onerm'] }}# {% if pr_journal[name]['actual'] == False %}
                                            <br><span class="small">({{ pr_journal[name]['rep'] }} x {{ pr_journal[name]['load'] }})</span> {% endif %}
                                        </td>
                                        <td>
                                            <span class="small"> Level {{ pr_journal[name]['level'] }} </span>
                                        </td>
                                        <td>
                                            <a href="/targets/{{ liftnumbers[name] }}/{{ pr_journal[name]['onerm'] }}/{{ pr_journal[name]['level'] }}"><i class="fas fa-bullseye"></i></a>
                                            <br><a href="/wodweight/{{ liftnumbers[name] }}/{{ pr_journal[name]['onerm'] }}"><i class="fas fa-calculator"></i> </a>
                                        </td>
                                        {% endif %}
                                    </tr>
                                    {% endfor %}
                                    <tr>
                                        <th colspan="4" style="text-align: center;">
                                            <br><span class="btn btn-primary btn-icon mb-3 mb-sm-0" data-toggle="modal" data-target="#modal-level-dfn">
                                                <span class="btn-inner--text">Define Levels</span>
                                            </span>
                                        </th>
                                    </tr>
                                </table>
                                <div class="py-4 text-center border-top">
                                    <h4> All Logged Lifts </h4>
                                </div>
                                <!-- ACCORDIAN WITH ALL USER LIFTS -->
                                <div class="accordion-1">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-12 ">
                                                <div class="accordion" id="alllifts" style="margin: auto;">
                                                    {% for name in liftcatalog: %}
                                                    <div class="card">
                                                        <div class="card-header" id="heading{{liftnumbers[name]}}">
                                                            <h5 class="mb-0">
                                                                <button class="btn btn-link w-100 text-primary text-left" type="button" data-toggle="collapse" data-target="#data{{liftnumbers[name]}}" aria-expanded="false" aria-controls="data{{liftnumbers[name]}}">
                                                                    {{ name }} <i class="fas fa-chevron-down float-right"></i>
                                                                </button>
                                                            </h5>
                                                        </div>
                                                        <div id="data{{liftnumbers[name]}}" class="collapse" aria-labelledby="heading{{liftnumbers[name]}}" data-parent="#alllifts">
                                                            <div class="card-body opacity-8" style="padding-left: 0; padding-right: 0;">
                                                                {% if liftdata[name]: %}
                                                                <table class="profile-table" style="margin: auto;">
                                                                    <tr>
                                                                        <th>One RM</th>
                                                                        <th>Date</th>
                                                                        <th>Action</th>
                                                                    </tr>
                                                                    {% for entry in liftdata[name]: %}
                                                                    <tr>
                                                                        <td>
                                                                            {{ liftdata[name][entry]['onerm'] }}#{% if liftdata[name][entry]['actual'] != True: %} <span class="small">({{ liftdata[name][entry]['rep'] }} x {{ liftdata[name][entry]['load'] }})</span>                                                                            {% endif %}
                                                                        </td>
                                                                        <td>
                                                                            <span class="small">{{ liftdata[name][entry]['date'] }}</span>
                                                                        </td>
                                                                        <td>
                                                                            <a href="/editlift/{{entry}}"><i class="far fa-edit"></i></a> &nbsp;&nbsp; <a href="/deletelift/{{entry}}"><i class="far fa-trash-alt"></i></a>
                                                                        </td>
                                                                    </tr>
                                                                    {% endfor %}
                                                                </table>
                                                                <span>
                                                                    {% else %}
                                                                    No lifts logged for {{ name }}
                                                                    {%endif%}
                                                                </span>
                                                                <div class="pt-3">
                                                                    <a href="/loglift/{{liftnumbers[name]}}/new/new" class="btn btn-sm btn-outline-primary"><i class="far fa-plus-square"></i> Log Lift</a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <p>
                                    <a href="/logout" id="logout-profile" class="btn btn-outline-primary mt-4"><i class="fas fa-sign-out-alt"></i> Logout</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="modal fade" id="modal-level-dfn" tabindex="-1" role="dialog" aria-labelledby="modal-default" aria-hidden="true">
                    <div class="modal-dialog modal- modal-dialog-centered modal-" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h6 class="modal-title" id="modal-title-default">Lifter Level Definitions</h6>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                              </button>
                            </div>
                            <div class="modal-body">
                                <p><span style="font-weight: bold;">Level I:</span> Stronger than 5% of lifters. A beginner lifter can perform the movement correctly and has practiced it for at least a month.</p>
                                <p><span style="font-weight: bold;">Level II:</span> Stronger than 20% of lifters. A novice lifter has trained regularly in the technique for at least six months.</p>
                                <p><span style="font-weight: bold;">Level III:</span> Stronger than 50% of lifters. An intermediate lifter has trained regularly in the technique for at least two years.</p>
                                <p><span style="font-weight: bold;">Level IV:</span> Stronger than 80% of lifters. An advanced lifter has progressed for over five years.</p>
                                <p><span style="font-weight: bold;">Level V:</span> Stronger than 95% of lifters. An elite lifter has dedicated over five years to become competitive at strength sports.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default ml-auto" data-dismiss="modal">OK</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {% include "_footer.html" %}